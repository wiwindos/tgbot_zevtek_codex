# AGENTS.md

Инструкции для AI-агентов по работе с проектом

## Общие принципы

1. **Простота и ясность**
   Предпочитай явные решения и понятную логику. Избегай преждевременной оптимизации и избыточных абстракций.
2. **Прагматизм и стабильность**
   Действуй как опытный инженер с 20 годами практики в SaaS: фокусируйся на поддерживаемом и надёжном коде.
3. **Прозрачность действий**
   Всегда документируй свои шаги: указывай, какие файлы и участки кода затрагиваешь, и зачем.

## Формат prompt’ов

Каждый запрос к AI-агенту должен содержать следующие секции:

1. ```markdown
   # Python 3.10, aiogram==3.20.0.post0, openai==0.27.0  
   ```

   Указываем версии языка и основных библиотек проекта.
2. **Путь к файлу и контекст:**

   ```plaintext
   Файл: `bot/main.py`  
   ```

   Копируем несколько строк до точки вставки.
3. **Описание задачи:**
   Чётко формулируем, что нужно сделать:

   ```plaintext
   Добавить обработчик команды `/help`, который выводит список доступных команд.  
   ```
4. **Конец маркер:**

   ```plaintext
   # end
   ```

**Задача:** добавить функцию `help_handler`, которая при команде `/help` отвечает текстом:

```
Доступные команды:
/start — запуск бота
/help — это сообщение помощи
```

```
# end
```

```

## Workflow генерации кода

1. **Планирование:**  
   Ищи краткий план действий в `docs/IMPLEMENTATION_PLAN.md` без кода — только шаги. Ориентируйся на него.
2. **Генерация:**  
   Сгенерируй 2–3 варианта кода по шаблонам из этого файла.
3. **Тестирование:**  
   Прогоняй unit- и E2E-тесты (`pytest`, `playwright`).
4. **Ревью:**  
   Выбери лучший вариант и сформируй PR, прикрепив исходный prompt.

## Тональность и стиль

- **Ясный и лаконичный:** используй простые предложения.
- **Дружелюбный, но профессиональный:** избегай жаргона и двусмысленностей.
- **Чёткая структура:** разделяй текст на пункты, подпункты и блоки кода.

## Полезные подсказки

- Коммит-месседж должен начинаться с типа изменения (`feat:`, `fix:`, `docs:`, `test:`) и краткого описания.
- Если добавляешь новую зависимость, обновляй `requirements.txt` и проверяй, что она поддерживается на CI.
- ВСЕГДА поддерживай `CONTEXT.md` в актуальном состоянии.
- Всегда убеждайся, что локально бот запускается через Docker Compose и проходит проверку типов (`mypy`).
- Строго НЕ Создавай пустые файлы.
```
